webpackJsonp([1],{0:function(n,l,t){n.exports=t("cDNt")},cDNt:function(n,l,t){"use strict";function u(n){return s._33(0,[(n()(),s._13(0,0,null,null,6,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(n,l,t){var u=!0;if("click"===l){u=!1!==s._26(n,2)._selectViaInteraction()&&u}if("keydown"===l){u=!1!==s._26(n,2)._handleKeydown(t)&&u}return u},g.b,g.a)),s._11(1,16384,null,0,m.p,[],null,null),s._11(2,49152,[[7,4]],0,m.n,[s.o,s.h,[2,m.m]],{value:[0,"value"]},null),(n()(),s._31(-1,0,["\n                    "])),(n()(),s._13(4,0,null,0,1,"span",[],null,null,null,null,null)),(n()(),s._31(5,null,["",""])),(n()(),s._31(-1,0,["\n                "]))],function(n,l){n(l,2,0,l.context.$implicit.city)},function(n,l){n(l,0,0,s._26(l,2)._getTabIndex(),s._26(l,2).selected,s._26(l,2).multiple,s._26(l,2).active,s._26(l,2).id,s._26(l,2).selected.toString(),s._26(l,2).disabled.toString(),s._26(l,2).disabled),n(l,5,0,l.context.$implicit.city)})}function e(n){return s._33(0,[(n()(),s._13(0,0,null,null,10,"mat-card",[["class","city-card mat-card"]],null,null,null,h.b,h.a)),s._11(1,16384,null,0,m.p,[],null,null),s._11(2,49152,null,0,y.a,[],null,null),s._11(3,278528,null,0,b.d,[s.x,s.y,s.o,s.J],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),s._31(-1,0,["\n        "])),(n()(),s._13(5,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),s._31(6,null,["",""])),(n()(),s._31(-1,0,["\n        "])),(n()(),s._13(8,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),s._31(9,null,["\n            ",": ","\n        "])),(n()(),s._31(-1,0,["\n    "]))],function(n,l){n(l,3,0,"city-card",l.component.getClass(l.context.$implicit))},function(n,l){n(l,6,0,l.context.$implicit.city),n(l,9,0,l.context.$implicit.measurements[0].parameter,l.context.$implicit.measurements[0].value)})}function i(n){return s._33(0,[(n()(),s._13(0,0,null,null,44,"div",[],null,null,null,null,null)),(n()(),s._31(-1,null,["\n    "])),(n()(),s._13(2,0,null,null,38,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,l,t){var u=!0;if("submit"===l){u=!1!==s._26(n,4).onSubmit(t)&&u}if("reset"===l){u=!1!==s._26(n,4).onReset()&&u}return u},null,null)),s._11(3,16384,null,0,v.p,[],null,null),s._11(4,16384,null,0,v.m,[[8,null],[8,null]],null,null),s._28(2048,null,v.b,null,[v.m]),s._11(6,16384,null,0,v.l,[v.b],null,null),(n()(),s._31(-1,null,["\n        "])),(n()(),s._13(8,0,null,null,31,"mat-form-field",[["class","cities-input mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,C.b,C.a)),s._11(9,16384,null,0,m.p,[],null,null),s._11(10,7389184,null,6,S.a,[s.o,s.K,s.h,[2,m.h]],null,null),s._29(335544320,1,{_control:0}),s._29(335544320,2,{_placeholderChild:0}),s._29(603979776,3,{_errorChildren:1}),s._29(603979776,4,{_hintChildren:1}),s._29(603979776,5,{_prefixChildren:1}),s._29(603979776,6,{_suffixChildren:1}),(n()(),s._31(-1,1,["\n            "])),(n()(),s._13(18,16777216,null,1,9,"input",[["aria-autocomplete","list"],["aria-label","City"],["autocomplete","off"],["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","City"],["role","combobox"]],[[1,"aria-activedescendant",0],[1,"aria-expanded",0],[1,"aria-owns",0],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"focusin"],[null,"blur"],[null,"input"],[null,"keydown"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(n,l,t){var u=!0,e=n.component;if("focusin"===l){u=!1!==s._26(n,20)._handleFocus()&&u}if("blur"===l){u=!1!==s._26(n,20)._onTouched()&&u}if("input"===l){u=!1!==s._26(n,20)._handleInput(t)&&u}if("keydown"===l){u=!1!==s._26(n,20)._handleKeydown(t)&&u}if("input"===l){u=!1!==s._26(n,21)._handleInput(t.target.value)&&u}if("blur"===l){u=!1!==s._26(n,21).onTouched()&&u}if("compositionstart"===l){u=!1!==s._26(n,21)._compositionStart()&&u}if("compositionend"===l){u=!1!==s._26(n,21)._compositionEnd(t.target.value)&&u}if("blur"===l){u=!1!==s._26(n,25)._focusChanged(!1)&&u}if("focus"===l){u=!1!==s._26(n,25)._focusChanged(!0)&&u}if("input"===l){u=!1!==s._26(n,25)._onInput()&&u}if("keyup.enter"===l){u=!1!==e.addToSearchedCities(t)&&u}return u},null,null)),s._11(19,16384,null,0,m.p,[],null,null),s._11(20,147456,null,0,x.e,[s.o,P.a,s.V,s.D,s.h,x.a,[2,z.c],[2,S.a],[2,I.b]],{autocomplete:[0,"autocomplete"]},null),s._11(21,16384,null,0,v.c,[s.K,s.o,[2,v.a]],null,null),s._28(1024,null,v.i,function(n,l){return[n,l]},[x.e,v.c]),s._11(23,540672,null,0,v.f,[[8,null],[8,null],[2,v.i]],{form:[0,"form"]},null),s._28(2048,null,v.j,null,[v.f]),s._11(25,933888,null,0,Q.a,[s.o,s.K,q.a,[2,v.j],[2,v.m],[2,v.g],m.c],{placeholder:[0,"placeholder"]},null),s._11(26,16384,null,0,v.k,[v.j],null,null),s._28(2048,[[1,4]],S.b,null,[Q.a]),(n()(),s._31(-1,1,["\n            "])),(n()(),s._13(29,0,null,1,9,"mat-autocomplete",[["class","mat-autocomplete"]],null,null,null,R.b,R.a)),s._11(30,16384,null,0,m.p,[],null,null),s._11(31,1097728,[["auto",4]],2,x.c,[s.h,s.o],null,null),s._29(603979776,7,{options:1}),s._29(603979776,8,{optionGroups:1}),(n()(),s._31(-1,0,["\n                "])),(n()(),s._7(16777216,null,0,2,null,u)),s._11(36,802816,null,0,b.e,[s.V,s.R,s.x],{ngForOf:[0,"ngForOf"]},null),s._27(131072,b.a,[s.h]),(n()(),s._31(-1,0,["\n            "])),(n()(),s._31(-1,1,["\n        "])),(n()(),s._31(-1,null,["\n    "])),(n()(),s._31(-1,null,["\n    "])),(n()(),s._7(16777216,null,null,1,null,e)),s._11(43,802816,null,0,b.e,[s.V,s.R,s.x],{ngForOf:[0,"ngForOf"]},null),(n()(),s._31(-1,null,["\n"]))],function(n,l){var t=l.component;n(l,20,0,s._26(l,31)),n(l,23,0,t.cityCtrl);n(l,25,0,"City"),n(l,36,0,s._32(l,36,0,s._26(l,37).transform(t.filteredCities))),n(l,43,0,t.searchedLocations)},function(n,l){n(l,2,0,s._26(l,6).ngClassUntouched,s._26(l,6).ngClassTouched,s._26(l,6).ngClassPristine,s._26(l,6).ngClassDirty,s._26(l,6).ngClassValid,s._26(l,6).ngClassInvalid,s._26(l,6).ngClassPending),n(l,8,1,[s._26(l,10)._control.errorState,s._26(l,10)._control.errorState,s._26(l,10)._canPlaceholderFloat,s._26(l,10)._control.shouldPlaceholderFloat||s._26(l,10)._shouldAlwaysFloat,s._26(l,10)._control.focused,"primary"==s._26(l,10).color,"accent"==s._26(l,10).color,"warn"==s._26(l,10).color,s._26(l,10)._shouldForward("untouched"),s._26(l,10)._shouldForward("touched"),s._26(l,10)._shouldForward("pristine"),s._26(l,10)._shouldForward("dirty"),s._26(l,10)._shouldForward("valid"),s._26(l,10)._shouldForward("invalid"),s._26(l,10)._shouldForward("pending")]),n(l,18,1,[null==s._26(l,20).activeOption?null:s._26(l,20).activeOption.id,s._26(l,20).panelOpen.toString(),null==s._26(l,20).autocomplete?null:s._26(l,20).autocomplete.id,s._26(l,25).id,s._26(l,25).placeholder,s._26(l,25).disabled,s._26(l,25).required,s._26(l,25).readonly,s._26(l,25)._ariaDescribedby||null,s._26(l,25).errorState,s._26(l,26).ngClassUntouched,s._26(l,26).ngClassTouched,s._26(l,26).ngClassPristine,s._26(l,26).ngClassDirty,s._26(l,26).ngClassValid,s._26(l,26).ngClassInvalid,s._26(l,26).ngClassPending])})}function r(n){return s._33(0,[(n()(),s._13(0,0,null,null,1,"viz-search-display",[],null,null,null,i,E)),s._11(1,114688,null,0,F,[w,D,O],null,null)],function(n,l){n(l,1,0)},null)}function o(n){return s._33(0,[(n()(),s._13(0,0,null,null,28,"div",[["class","wrapper"]],null,null,null,null,null)),(n()(),s._31(-1,null,["\n    "])),(n()(),s._13(2,0,null,null,9,"mat-card",[["class","intro mat-card"]],null,null,null,h.b,h.a)),s._11(3,16384,null,0,m.p,[],null,null),s._11(4,49152,null,0,y.a,[],null,null),(n()(),s._31(-1,0,["\n        "])),(n()(),s._13(6,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),s._31(-1,null,["Welcome to OpenAQ Viz"])),(n()(),s._31(-1,0,["\n        "])),(n()(),s._13(9,0,null,0,1,"h3",[],null,null,null,null,null)),(n()(),s._31(-1,null,["Compare air quality for cities by searching below"])),(n()(),s._31(-1,0,["\n    "])),(n()(),s._31(-1,null,["\n\n    "])),(n()(),s._13(13,0,null,null,1,"viz-search-display",[],null,null,null,i,E)),s._11(14,114688,null,0,F,[w,D,O],null,null),(n()(),s._31(-1,null,["\n    \n    "])),(n()(),s._13(16,0,null,null,11,"footer",[],null,null,null,null,null)),(n()(),s._31(-1,null,["\n        "])),(n()(),s._13(18,0,null,null,8,"mat-card",[["class","mat-card"]],null,null,null,h.b,h.a)),s._11(19,16384,null,0,m.p,[],null,null),s._11(20,49152,null,0,y.a,[],null,null),(n()(),s._31(-1,0,["\n            "])),(n()(),s._13(22,0,null,0,3,"h3",[],null,null,null,null,null)),(n()(),s._31(-1,null,["Find out more about open-source air data @ "])),(n()(),s._13(24,0,null,null,1,"a",[["href","https://openaq.org"],["target","_blank"]],null,null,null,null,null)),(n()(),s._31(-1,null,["openaq.org"])),(n()(),s._31(-1,0,["\n        "])),(n()(),s._31(-1,null,["\n    "])),(n()(),s._31(-1,null,["\n"]))],function(n,l){n(l,14,0)},null)}function a(n){return s._33(0,[(n()(),s._13(0,0,null,null,1,"viz-home",[],null,null,null,o,U)),s._11(1,49152,null,0,V,[],null,null)],null,null)}function c(n){return s._33(0,[(n()(),s._13(0,0,null,null,1,"viz-home",[],null,null,null,o,U)),s._11(1,49152,null,0,V,[],null,null)],null,null)}function _(n){return s._33(0,[(n()(),s._13(0,0,null,null,1,"viz-app",[],null,null,null,c,K)),s._11(1,49152,null,0,f,[],null,null)],null,null)}Object.defineProperty(l,"__esModule",{value:!0});var s=t("/oeL"),d={production:!0,openaqApiUrl:"https://api.openaq.org/v1/"},p=function(){function n(){}return n}(),f=function(){function n(){}return n.ctorParameters=function(){return[]},n}(),h=t("z4MQ"),m=t("j5BN"),y=t("Ioj9"),g=t("8oXs"),b=t("qbdv"),v=t("bm2B"),C=t("6OSA"),S=t("Lpd/"),w=function(){function n(){}return n.prototype.filterCities=function(n,l){return l.filter(function(l){return 0===l.city.toLowerCase().indexOf(n.toLowerCase())}).slice(0,5)},n.prototype.sortCities=function(n,l){var t=n.city.toLowerCase(),u=l.city.toLowerCase();return t<u?-1:t>u?1:0},n.prototype.pm25Color=function(n){if(!this.validateLatestResponse(n))return"";var l=n.measurements[0].value;return l?l<20?"green":l<40?"orange":l<70?"red":l>=70?"dark-red":"":""},n.prototype.validateLatestResponse=function(n){return!!(n&&n.city&&n.measurements&&n.measurements[0]&&n.measurements[0].value)},n}(),k=t("CPp0"),A=function(){function n(){}return n.prototype.buildBaseQueryString=function(n){return this.setBaseQueryArray(n).join("&")},n.prototype.buildOpenAQQueryString=function(n){var l=this,t=this.setBaseQueryArray(n);return Object.keys(n).forEach(function(u){Array.isArray(n[u])&&n[u].forEach(function(n){return t.push(l.encode(u+"[]",n))})}),t.join("&")},n.prototype.encode=function(n,l){return encodeURIComponent(n)+"="+encodeURIComponent(l.toString())},n.prototype.setBaseQueryArray=function(n){var l=this,t=[];return Object.keys(n).forEach(function(u){Array.isArray(n[u])||t.push(l.encode(u,n[u]))}),t},n}(),j=(t("GQSG"),function(){function n(n,l){this.http=n,this.apiService=l}return n.prototype.getCities=function(n){return this.http.get(d.openaqApiUrl+"cities?"+this.apiService.buildOpenAQQueryString(n)).map(function(n){return n.json().results})},n.ctorParameters=function(){return[{type:k.d},{type:A}]},n}()),D=function(){function n(n){this.citiesApi=n}return n.prototype.getAllCities=function(){var n={limit:9999};return this.citiesApi.getCities(n)},n.ctorParameters=function(){return[{type:j}]},n}(),L=function(){function n(n,l){this.http=n,this.apiService=l}return n.prototype.getLatest=function(n){return this.http.get(d.openaqApiUrl+"latest?"+this.apiService.buildOpenAQQueryString(n)).map(function(n){return n.json().results})},n.ctorParameters=function(){return[{type:k.d},{type:A}]},n}(),O=function(){function n(n){this.latestApi=n}return n.prototype.getLatestPM25ByCity=function(n){var l={city:n,parameter:"pm25"};return this.latestApi.getLatest(l)},n.ctorParameters=function(){return[{type:L}]},n}(),F=(t("RXa1"),function(){function n(n,l,t){this.searchDisplayService=n,this.citiesService=l,this.latestService=t,this.allCities=[],this.searchedLocations=[]}return n.prototype.ngOnInit=function(){var n=this;this.cityCtrl=new v.e,this.loadCities(),this.filteredCities=this.cityCtrl.valueChanges.startWith(null).map(function(l){return l?n.searchDisplayService.filterCities(l,n.allCities):n.allCities.slice(0,5)})},n.prototype.loadCities=function(){var n=this;this.citiesService.getAllCities().subscribe(function(l){return n.allCities=l.sort(n.searchDisplayService.sortCities)})},n.prototype.loadLatest=function(n){var l=this;this.latestService.getLatestPM25ByCity(n).subscribe(function(n){l.searchDisplayService.validateLatestResponse(n[0])&&l.searchedLocations.push(n[0])})},n.prototype.addToSearchedCities=function(n){this.loadLatest(this.cityCtrl.value)},n.prototype.getClass=function(n){return this.searchDisplayService.pm25Color(n)},n.ctorParameters=function(){return[{type:w},{type:D},{type:O}]},n}()),x=t("1ini"),P=t("OFGE"),z=t("l6RC"),I=t("fc+i"),Q=t("SlD5"),q=t("V8+5"),R=t("Elun"),B=[],E=s._10({encapsulation:2,styles:B,data:{}}),V=(s._8("viz-search-display",F,r,{},{},[]),function(){function n(){}return n.ctorParameters=function(){return[]},n}()),T=[],U=s._10({encapsulation:2,styles:T,data:{}}),$=(s._8("viz-home",V,a,{},{},[]),[]),K=s._10({encapsulation:2,styles:$,data:{}}),M=s._8("viz-app",f,_,{},{},[]),G=t("f9zQ"),N=t("fL27"),W=t("8Xfy"),X=t("4jwp"),J=t("EyWH"),Y=function(){function n(){}return n}(),Z=function(){function n(){}return n}(),H=function(){function n(){}return n}(),nn=t("ghl+"),ln=t("CZgk"),tn=function(){function n(){}return n}(),un=function(){function n(){}return n}(),en=function(){function n(){}return n}(),rn=function(){function n(){}return n}(),on=s._9(p,[f],function(n){return s._23([s._24(512,s.k,s._5,[[8,[M]],[3,s.k],s.B]),s._24(5120,s.z,s._22,[[3,s.z]]),s._24(4608,b.h,b.g,[s.z]),s._24(4608,s.i,s.i,[]),s._24(5120,s.a,s._14,[]),s._24(5120,s.x,s._19,[]),s._24(5120,s.y,s._20,[]),s._24(4608,I.c,I.t,[b.c]),s._24(6144,s.N,null,[I.c]),s._24(4608,I.f,I.g,[]),s._24(5120,I.d,function(n,l,t,u){return[new I.l(n),new I.p(l),new I.o(t,u)]},[b.c,b.c,b.c,I.f]),s._24(4608,I.e,I.e,[I.d,s.D]),s._24(135680,I.n,I.n,[b.c]),s._24(4608,I.m,I.m,[I.e,I.n]),s._24(5120,G.a,N.d,[]),s._24(5120,G.c,N.e,[]),s._24(4608,G.b,N.c,[G.a,G.c]),s._24(5120,s.L,N.f,[I.m,G.b,s.D]),s._24(6144,I.q,null,[I.n]),s._24(4608,s.S,s.S,[s.D]),s._24(4608,I.h,I.h,[b.c]),s._24(4608,I.j,I.j,[b.c]),s._24(4608,k.c,k.c,[]),s._24(4608,k.g,k.b,[]),s._24(5120,k.i,k.j,[]),s._24(4608,k.h,k.h,[k.c,k.g,k.i]),s._24(4608,k.f,k.a,[]),s._24(5120,k.d,k.k,[k.h,k.f]),s._24(4608,A,A,[]),s._24(4608,j,j,[k.d,A]),s._24(4608,L,L,[k.d,A]),s._24(4608,D,D,[j]),s._24(4608,O,O,[L]),s._24(6144,z.b,null,[I.b]),s._24(4608,z.c,z.c,[[2,z.b]]),s._24(4608,q.a,q.a,[]),s._24(4608,W.h,W.h,[q.a]),s._24(4608,W.g,W.g,[W.h,q.a,s.D]),s._24(136192,W.d,W.b,[[3,W.d],q.a]),s._24(5120,W.k,W.j,[[3,W.k],[2,W.i],q.a]),s._24(5120,W.f,W.e,[[3,W.f],s.D,q.a]),s._24(5120,X.c,X.a,[[3,X.c],s.D,q.a]),s._24(5120,X.f,X.e,[[3,X.f],q.a,s.D,X.c]),s._24(4608,P.e,P.e,[X.c,X.f]),s._24(5120,P.c,P.f,[[3,P.c]]),s._24(4608,P.i,P.i,[X.f]),s._24(4608,P.a,P.a,[P.e,P.c,s.k,P.i,s.e,s.v,s.D]),s._24(5120,P.g,P.h,[P.a]),s._24(5120,x.a,x.b,[P.a]),s._24(4608,m.c,m.c,[]),s._24(4608,J.b,N.b,[s.L,I.b]),s._24(4608,v.q,v.q,[]),s._24(4608,v.d,v.d,[]),s._24(4608,w,w,[]),s._24(512,b.b,b.b,[]),s._24(1024,s.p,I.r,[]),s._24(1024,s.b,function(n,l){return[I.s(n,l)]},[[2,I.i],[2,s.C]]),s._24(512,s.c,s.c,[[2,s.b]]),s._24(131584,s._12,s._12,[s.D,s._6,s.v,s.p,s.k,s.c]),s._24(2048,s.e,null,[s._12]),s._24(512,s.d,s.d,[s.e]),s._24(512,I.a,I.a,[[3,I.a]]),s._24(512,k.e,k.e,[]),s._24(512,Y,Y,[]),s._24(512,Z,Z,[]),s._24(512,H,H,[]),s._24(512,m.a,m.a,[]),s._24(512,z.a,z.a,[]),s._24(256,m.d,!0,[]),s._24(512,m.j,m.j,[[2,m.d]]),s._24(512,y.c,y.c,[]),s._24(512,q.b,q.b,[]),s._24(512,m.t,m.t,[]),s._24(512,W.a,W.a,[]),s._24(512,nn.a,nn.a,[]),s._24(512,m.r,m.r,[]),s._24(512,m.o,m.o,[]),s._24(512,ln.b,ln.b,[]),s._24(512,X.b,X.b,[]),s._24(512,P.d,P.d,[]),s._24(512,x.d,x.d,[]),s._24(512,S.c,S.c,[]),s._24(512,Q.b,Q.b,[]),s._24(512,tn,tn,[]),s._24(512,N.a,N.a,[]),s._24(512,un,un,[]),s._24(512,v.o,v.o,[]),s._24(512,v.h,v.h,[]),s._24(512,v.n,v.n,[]),s._24(512,en,en,[]),s._24(512,rn,rn,[]),s._24(512,p,p,[])])});d.production&&Object(s.Z)(),Object(I.k)().bootstrapModuleFactory(on).catch(function(n){return console.log(n)})},gFIY:function(n,l){function t(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}t.keys=function(){return[]},t.resolve=t,n.exports=t,t.id="gFIY"}},[0]);