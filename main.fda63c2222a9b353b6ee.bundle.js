webpackJsonp([1],{0:function(n,t,l){n.exports=l("cDNt")},cDNt:function(n,t,l){"use strict";function e(n){return b._35(0,[(n()(),b._13(0,0,null,null,9,"mat-card",[["class","intro mat-card"]],null,null,null,Q.b,Q.a)),b._11(1,16384,null,0,P.p,[],null,null),b._11(2,49152,null,0,w.a,[],null,null),(n()(),b._33(-1,0,["\n    "])),(n()(),b._13(4,0,null,0,1,"h1",[],null,null,null,null,null)),(n()(),b._33(-1,null,["Welcome to CityAQ"])),(n()(),b._33(-1,0,["\n    "])),(n()(),b._13(7,0,null,0,1,"h3",[],null,null,null,null,null)),(n()(),b._33(-1,null,["Compare air quality for cities by searching below"])),(n()(),b._33(-1,0,["\n"]))],null,null)}function u(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-intro",[],null,null,null,e,L)),b._11(1,49152,null,0,O,[],null,null)],null,null)}function r(n){return b._35(0,[(n()(),b._13(0,0,null,null,2,"mat-spinner",[["class","mat-spinner mat-progress-spinner"],["mode","indeterminate"],["role","progressbar"]],[[4,"width","px"],[4,"height","px"]],null,null,j.b,j.a)),b._11(1,16384,null,0,P.p,[],null,null),b._11(2,573440,null,0,B.c,[b.K,b.o,R.a,[2,D.c]],{diameter:[0,"diameter"],strokeWidth:[1,"strokeWidth"]},null)],function(n,t){n(t,2,0,50,5)},function(n,t){n(t,0,0,b._26(t,2)._elementSize,b._26(t,2)._elementSize)})}function i(n){return b._35(0,[(n()(),b._13(0,0,null,null,7,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(n,t,l){var e=!0;if("click"===t){e=!1!==b._26(n,2)._selectViaInteraction()&&e}if("keydown"===t){e=!1!==b._26(n,2)._handleKeydown(l)&&e}return e},E.b,E.a)),b._11(1,16384,null,0,P.p,[],null,null),b._11(2,49152,[[7,4]],0,P.n,[b.o,b.h,[2,P.m]],{value:[0,"value"]},null),(n()(),b._33(-1,0,["\n                "])),(n()(),b._13(4,0,null,0,2,"span",[],null,null,null,null,null)),(n()(),b._33(5,null,["",""])),b._29(6,1),(n()(),b._33(-1,0,["\n            "]))],function(n,t){n(t,2,0,t.context.$implicit.city)},function(n,t){n(t,0,0,b._26(t,2)._getTabIndex(),b._26(t,2).selected,b._26(t,2).multiple,b._26(t,2).active,b._26(t,2).id,b._26(t,2).selected.toString(),b._26(t,2).disabled.toString(),b._26(t,2).disabled),n(t,5,0,b._34(t,5,0,n(t,6,0,b._26(t.parent,0),t.context.$implicit.city)))})}function a(n){return b._35(0,[b._27(0,D.m,[]),(n()(),b._13(1,0,null,null,41,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(n,t,l){var e=!0;if("submit"===t){e=!1!==b._26(n,3).onSubmit(l)&&e}if("reset"===t){e=!1!==b._26(n,3).onReset()&&e}return e},null,null)),b._11(2,16384,null,0,N.n,[],null,null),b._11(3,540672,null,0,N.f,[[8,null],[8,null]],{form:[0,"form"]},null),b._30(2048,null,N.b,null,[N.f]),b._11(5,16384,null,0,N.j,[N.b],null,null),(n()(),b._33(-1,null,["\n    "])),(n()(),b._13(7,0,null,null,34,"mat-form-field",[["class","cities-input mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,H.b,H.a)),b._11(8,16384,null,0,P.p,[],null,null),b._11(9,7389184,null,6,K.a,[b.o,b.K,b.h,[2,P.h]],null,null),b._31(335544320,1,{_control:0}),b._31(335544320,2,{_placeholderChild:0}),b._31(603979776,3,{_errorChildren:1}),b._31(603979776,4,{_hintChildren:1}),b._31(603979776,5,{_prefixChildren:1}),b._31(603979776,6,{_suffixChildren:1}),(n()(),b._33(-1,1,["\n        "])),(n()(),b._13(17,16777216,null,1,9,"input",[["aria-autocomplete","list"],["aria-label","City"],["autocomplete","off"],["class","mat-input-element mat-form-field-autofill-control"],["formControlName","searchInput"],["matInput",""],["placeholder","City"],["role","combobox"]],[[1,"aria-activedescendant",0],[1,"aria-expanded",0],[1,"aria-owns",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0]],[[null,"keyup.enter"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"focusin"],[null,"keydown"],[null,"focus"]],function(n,t,l){var e=!0,u=n.component;if("input"===t){e=!1!==b._26(n,18)._handleInput(l.target.value)&&e}if("blur"===t){e=!1!==b._26(n,18).onTouched()&&e}if("compositionstart"===t){e=!1!==b._26(n,18)._compositionStart()&&e}if("compositionend"===t){e=!1!==b._26(n,18)._compositionEnd(l.target.value)&&e}if("focusin"===t){e=!1!==b._26(n,19)._handleFocus()&&e}if("blur"===t){e=!1!==b._26(n,19)._onTouched()&&e}if("input"===t){e=!1!==b._26(n,19)._handleInput(l)&&e}if("keydown"===t){e=!1!==b._26(n,19)._handleKeydown(l)&&e}if("blur"===t){e=!1!==b._26(n,25)._focusChanged(!1)&&e}if("focus"===t){e=!1!==b._26(n,25)._focusChanged(!0)&&e}if("input"===t){e=!1!==b._26(n,25)._onInput()&&e}if("keyup.enter"===t){e=!1!==u.attemptSearch()&&e}return e},null,null)),b._11(18,16384,null,0,N.c,[b.K,b.o,[2,N.a]],null,null),b._11(19,147456,null,0,$.e,[b.o,G.a,b.V,b.D,b.h,$.a,[2,J.c],[2,K.a],[2,X.b]],{autocomplete:[0,"autocomplete"]},null),b._30(1024,null,N.g,function(n,t){return[n,t]},[N.c,$.e]),b._11(21,671744,null,0,N.e,[[3,N.b],[8,null],[8,null],[2,N.g]],{name:[0,"name"]},null),b._30(2048,null,N.h,null,[N.e]),b._11(23,16384,null,0,N.i,[N.h],null,null),b._11(24,16384,null,0,P.p,[],null,null),b._11(25,933888,null,0,Z.a,[b.o,b.K,R.a,[2,N.h],[2,N.k],[2,N.f],P.c],{placeholder:[0,"placeholder"]},null),b._30(2048,[[1,4]],K.b,null,[Z.a]),(n()(),b._33(-1,1,["\n        "])),(n()(),b._7(16777216,null,1,1,null,r)),b._11(29,16384,null,0,D.f,[b.V,b.R],{ngIf:[0,"ngIf"]},null),(n()(),b._33(-1,1,["\n        "])),(n()(),b._13(31,0,null,1,9,"mat-autocomplete",[["class","mat-autocomplete"]],null,null,null,nn.b,nn.a)),b._11(32,16384,null,0,P.p,[],null,null),b._11(33,1097728,[["auto",4]],2,$.c,[b.h,b.o],null,null),b._31(603979776,7,{options:1}),b._31(603979776,8,{optionGroups:1}),(n()(),b._33(-1,0,["\n            "])),(n()(),b._7(16777216,null,0,2,null,i)),b._11(38,802816,null,0,D.e,[b.V,b.R,b.x],{ngForOf:[0,"ngForOf"]},null),b._27(131072,D.a,[b.h]),(n()(),b._33(-1,0,["\n        "])),(n()(),b._33(-1,1,["\n    "])),(n()(),b._33(-1,null,["\n"]))],function(n,t){var l=t.component;n(t,3,0,l.searchForm),n(t,19,0,b._26(t,33));n(t,21,0,"searchInput");n(t,25,0,"City"),n(t,29,0,l.searching),n(t,38,0,b._34(t,38,0,b._26(t,39).transform(l.filteredCities)))},function(n,t){n(t,1,0,b._26(t,5).ngClassUntouched,b._26(t,5).ngClassTouched,b._26(t,5).ngClassPristine,b._26(t,5).ngClassDirty,b._26(t,5).ngClassValid,b._26(t,5).ngClassInvalid,b._26(t,5).ngClassPending),n(t,7,1,[b._26(t,9)._control.errorState,b._26(t,9)._control.errorState,b._26(t,9)._canPlaceholderFloat,b._26(t,9)._control.shouldPlaceholderFloat||b._26(t,9)._shouldAlwaysFloat,b._26(t,9)._control.focused,"primary"==b._26(t,9).color,"accent"==b._26(t,9).color,"warn"==b._26(t,9).color,b._26(t,9)._shouldForward("untouched"),b._26(t,9)._shouldForward("touched"),b._26(t,9)._shouldForward("pristine"),b._26(t,9)._shouldForward("dirty"),b._26(t,9)._shouldForward("valid"),b._26(t,9)._shouldForward("invalid"),b._26(t,9)._shouldForward("pending")]),n(t,17,1,[null==b._26(t,19).activeOption?null:b._26(t,19).activeOption.id,b._26(t,19).panelOpen.toString(),null==b._26(t,19).autocomplete?null:b._26(t,19).autocomplete.id,b._26(t,23).ngClassUntouched,b._26(t,23).ngClassTouched,b._26(t,23).ngClassPristine,b._26(t,23).ngClassDirty,b._26(t,23).ngClassValid,b._26(t,23).ngClassInvalid,b._26(t,23).ngClassPending,b._26(t,25).id,b._26(t,25).placeholder,b._26(t,25).disabled,b._26(t,25).required,b._26(t,25).readonly,b._26(t,25)._ariaDescribedby||null,b._26(t,25).errorState])})}function o(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-search",[],null,null,null,a,ln)),b._11(1,114688,null,0,Y,[N.d,V,W],null,null)],function(n,t){n(t,1,0)},null)}function c(n){return b._35(0,[(n()(),b._13(0,0,null,null,7,"div",[["class","aqi-indicator"]],null,null,null,null,null)),(n()(),b._33(-1,null,["\n        "])),(n()(),b._13(2,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),b._33(3,null,["",""])),(n()(),b._33(-1,null,["\n        "])),(n()(),b._13(5,0,null,null,1,"span",[["class","aqi-name"]],null,null,null,null,null)),(n()(),b._33(6,null,["",""])),(n()(),b._33(-1,null,["\n    "]))],null,function(n,t){n(t,3,0,t.context.$implicit.value),n(t,6,0,t.context.$implicit.parameter)})}function s(n){return b._35(0,[b._27(0,D.m,[]),(n()(),b._13(1,0,null,null,19,"mat-card",[["class","city-card mat-card"]],null,null,null,Q.b,Q.a)),b._11(2,278528,null,0,D.i,[b.y,b.o,b.J],{ngStyle:[0,"ngStyle"]},null),b._28(3,{"background-image":0}),b._11(4,16384,null,0,P.p,[],null,null),b._11(5,49152,null,0,w.a,[],null,null),(n()(),b._33(-1,0,["\n    "])),(n()(),b._13(7,0,null,0,1,"div",[["class","color-overlay"]],null,null,null,null,null)),b._11(8,278528,null,0,D.d,[b.x,b.y,b.o,b.J],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(n()(),b._33(-1,0,["\n    "])),(n()(),b._13(10,0,null,0,2,"h2",[],null,null,null,null,null)),(n()(),b._33(11,null,["",""])),b._29(12,1),(n()(),b._33(-1,0,["\n    "])),(n()(),b._13(14,0,null,0,2,"h4",[],null,null,null,null,null)),(n()(),b._33(15,null,["",""])),b._29(16,1),(n()(),b._33(-1,0,["\n    "])),(n()(),b._7(16777216,null,0,1,null,c)),b._11(19,802816,null,0,D.e,[b.V,b.R,b.x],{ngForOf:[0,"ngForOf"]},null),(n()(),b._33(-1,0,["\n"]))],function(n,t){var l=t.component;n(t,2,0,n(t,3,0,"url("+l.staticMapsURL+")"));n(t,8,0,"color-overlay","bg-0-7-"+l.overallAQIClass()),n(t,19,0,l.aqis)},function(n,t){var l=t.component;n(t,11,0,b._34(t,11,0,n(t,12,0,b._26(t,0),l.searchedCity.city))),n(t,15,0,b._34(t,15,0,n(t,16,0,b._26(t,0),l.searchedCity.country)))})}function p(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-city-card",[],null,null,null,s,bn)),b._11(1,114688,null,0,vn,[un,on,gn],null,null)],function(n,t){n(t,1,0)},null)}function _(n){return b._35(0,[(n()(),b._13(0,0,null,null,4,"div",[],[[24,"@fadeSlide",0]],null,null,null,null)),(n()(),b._33(-1,null,["\n    "])),(n()(),b._13(2,0,null,null,1,"aq-city-card",[],null,null,null,s,bn)),b._11(3,114688,null,0,vn,[un,on,gn],{searchedCity:[0,"searchedCity"]},null),(n()(),b._33(-1,null,["\n"]))],function(n,t){n(t,3,0,t.context.$implicit)},function(n,t){n(t,0,0,void 0)})}function f(n){return b._35(0,[(n()(),b._7(16777216,null,null,1,null,_)),b._11(1,802816,null,0,D.e,[b.V,b.R,b.x],{ngForOf:[0,"ngForOf"]},null)],function(n,t){n(t,1,0,t.component.searchedCities)},null)}function d(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-city-cards-list",[],null,null,null,f,In)),b._11(1,114688,null,0,Sn,[],null,null)],function(n,t){n(t,1,0)},null)}function h(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-search",[],null,[[null,"addSearchedCity"]],function(n,t,l){var e=!0,u=n.component;if("addSearchedCity"===t){e=!1!==u.addSearchedCity(l)&&e}return e},a,ln)),b._11(1,114688,null,0,Y,[N.d,V,W],{allCities:[0,"allCities"]},{addSearchedCity:"addSearchedCity"}),(n()(),b._33(-1,null,["\n"])),(n()(),b._13(3,0,null,null,1,"aq-city-cards-list",[],null,null,null,f,In)),b._11(4,114688,null,0,Sn,[],{searchedCities:[0,"searchedCities"]},null)],function(n,t){var l=t.component;n(t,1,0,l.allCities),n(t,4,0,l.searchedCities)},null)}function y(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-compare",[],null,null,null,h,Pn)),b._11(1,114688,null,0,U,[M,q],null,null)],function(n,t){n(t,1,0)},null)}function m(n){return b._35(0,[(n()(),b._13(0,0,null,null,7,"div",[["class","wrapper"]],null,null,null,null,null)),(n()(),b._33(-1,null,["\n    "])),(n()(),b._13(2,0,null,null,1,"aq-intro",[],null,null,null,e,L)),b._11(3,49152,null,0,O,[],null,null),(n()(),b._33(-1,null,["\n    "])),(n()(),b._13(5,0,null,null,1,"aq-compare",[],null,null,null,h,Pn)),b._11(6,114688,null,0,U,[M,q],null,null),(n()(),b._33(-1,null,["\n"]))],function(n,t){n(t,6,0)},null)}function g(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-home",[],null,null,null,m,kn)),b._11(1,49152,null,0,wn,[],null,null)],null,null)}function v(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-home",[],null,null,null,m,kn)),b._11(1,49152,null,0,wn,[],null,null)],null,null)}function C(n){return b._35(0,[(n()(),b._13(0,0,null,null,1,"aq-app",[],null,null,null,v,qn)),b._11(1,49152,null,0,I,[],null,null)],null,null)}Object.defineProperty(t,"__esModule",{value:!0});var b=l("/oeL"),S={production:!0,openaqApiUrl:"https://api.openaq.org/v1/",mapsApiUrl:"https://maps.googleapis.com/maps/api/",staticMapsKey:"AIzaSyBJ4wQTemqdOaXFsAmZotfakpevljfN2iY"},A=function(){function n(){}return n}(),I=function(){function n(){}return n.ctorParameters=function(){return[]},n}(),Q=l("z4MQ"),P=l("j5BN"),w=l("Ioj9"),O=function(){function n(){}return n.ctorParameters=function(){return[]},n}(),k=[],L=b._10({encapsulation:2,styles:k,data:{}}),q=(b._8("aq-intro",O,u,{},{},[]),function(){function n(){}return n.prototype.sortCities=function(n,t){var l=n.city.toLowerCase(),e=t.city.toLowerCase();return l<e?-1:l>e?1:0},n}()),F=l("CPp0"),x=function(){function n(){}return n.prototype.buildBaseQueryString=function(n){return this.setBaseQueryArray(n).join("&")||""},n.prototype.buildOpenAQQueryString=function(n){return this.buildQueryStringIncludingArrayProps(n,"[]")},n.prototype.buildMapsQueryString=function(n){return this.buildQueryStringIncludingArrayProps(n,"")},n.prototype.setBaseQueryArray=function(n){var t=this,l=[];return Object.keys(n).forEach(function(e){Array.isArray(n[e])||null==n[e]||l.push(t.encode(e,n[e]))}),l},n.prototype.buildQueryStringIncludingArrayProps=function(n,t){var l=this,e=this.setBaseQueryArray(n),u=t;return Object.keys(n).forEach(function(t){Array.isArray(n[t])&&n[t].forEach(function(n){null!=n&&e.push(l.encode(t+u,n))})}),e.join("&")||""},n.prototype.encode=function(n,t){return encodeURIComponent(n)+"="+encodeURIComponent(t.toString())},n}(),z=(l("GQSG"),function(){function n(n,t){this.http=n,this.apiService=t}return n.prototype.getCities=function(n){return this.http.get(S.openaqApiUrl+"cities?"+this.apiService.buildOpenAQQueryString(n)).map(function(n){return n.json().results})},n.ctorParameters=function(){return[{type:F.d},{type:x}]},n}()),M=function(){function n(n){this.citiesApi=n}return n.prototype.getAllCities=function(){var n={limit:9999};return this.citiesApi.getCities(n)},n.ctorParameters=function(){return[{type:z}]},n}(),U=function(){function n(n,t){this.citiesHandlerService=n,this.compareService=t,this.allCities=[],this.searchedCities=[]}return n.prototype.ngOnInit=function(){this.loadCities()},n.prototype.loadCities=function(){var n=this;this.citiesHandlerService.getAllCities().subscribe(function(t){return n.allCities=t.sort(n.compareService.sortCities)})},n.prototype.addSearchedCity=function(n){this.searchedCities.unshift(n)},n.ctorParameters=function(){return[{type:M},{type:q}]},n}(),j=l("OBOK"),B=l("0bRs"),R=l("V8+5"),D=l("qbdv"),E=l("8oXs"),N=l("bm2B"),H=l("6OSA"),K=l("Lpd/"),V=function(){function n(){}return n.prototype.validateSearchInput=function(n){return null},n.prototype.filterCities=function(n,t){return n?this.filterCitiesWhenNameExists(n,t):t.slice(0,5)},n.prototype.filterCitiesWhenNameExists=function(n,t){return t.filter(function(t){return 0===t.city.toLowerCase().indexOf(n.toLowerCase())}).slice(0,5)},n}(),T=function(){function n(n,t){this.http=n,this.apiService=t}return n.prototype.getLocations=function(n){return this.http.get(S.openaqApiUrl+"locations?"+this.apiService.buildOpenAQQueryString(n)).map(function(n){return n.json().results})},n.ctorParameters=function(){return[{type:F.d},{type:x}]},n}(),W=function(){function n(n){this.locationsApi=n}return n.prototype.getLocationsByCityAndCountry=function(n,t){var l={city:n,country:t};return this.locationsApi.getLocations(l)},n.ctorParameters=function(){return[{type:T}]},n}(),Y=(l("RXa1"),function(){function n(n,t,l){this.fb=n,this.searchService=t,this.locationsHandlerService=l,this.allCities=[],this.addSearchedCity=new b.q,this.searching=!1}return n.prototype.ngOnInit=function(){this.newForm(),this.filterCitiesOnInputChange()},n.prototype.attemptSearch=function(){this.searchForm.valid&&this.search()},n.prototype.newForm=function(){this.searchForm=this.fb.group({searchInput:["",this.searchService.validateSearchInput]})},n.prototype.filterCitiesOnInputChange=function(){var n=this;this.filteredCities=this.searchForm.get("searchInput").valueChanges.startWith(null).map(function(t){return n.searchService.filterCities(t,n.allCities)})},n.prototype.search=function(){var n=this;this.searching=!0;var t=this.searchForm.value.searchInput,l=this.allCities.find(function(n){return n.city===t}),e=l.country;this.locationsHandlerService.getLocationsByCityAndCountry(t,e).subscribe(function(t){return n.outputSearchedCity(l,t)})},n.prototype.outputSearchedCity=function(n,t){this.searching=!1;var l=n;l.locationsResponse=t,this.addSearchedCity.emit(l)},n.ctorParameters=function(){return[{type:N.d},{type:V},{type:W}]},n}()),$=l("1ini"),G=l("OFGE"),J=l("l6RC"),X=l("fc+i"),Z=l("SlD5"),nn=l("Elun"),tn=[],ln=b._10({encapsulation:2,styles:tn,data:{}}),en=(b._8("aq-search",Y,o,{allCities:"allCities"},{addSearchedCity:"addSearchedCity"},[]),function(){function n(n,t){this.http=n,this.apiService=t}return n.prototype.getLatest=function(n){return this.http.get(S.openaqApiUrl+"latest?"+this.apiService.buildOpenAQQueryString(n)).map(function(n){return n.json().results})},n.ctorParameters=function(){return[{type:F.d},{type:x}]},n}()),un=function(){function n(n){this.latestApi=n}return n.prototype.getLatestByCityAndCountry=function(n,t){var l={city:n,country:t};return this.latestApi.getLatest(l)},n.ctorParameters=function(){return[{type:en}]},n}(),rn=function(){function n(n,t){this.http=n,this.apiService=t}return n.prototype.getImage=function(n){return this.http.get(S.mapsApiUrl+"staticmap?"+this.apiService.buildMapsQueryString(n),{responseType:F.g.Blob}).map(function(n){return n.blob()})},n.ctorParameters=function(){return[{type:F.d},{type:x}]},n}(),an={center:"",zoom:2,size:"550x550",key:"",scale:2,markers:"color:black|size:small",style:["feature:poi|visibility:off","feature:road|Cvisibility:off","feature:transit|visibility:off","feature:water|color:0xcccccc","feature:landscape|color:0xffffff","feature:administrative|element:labels|visibility:off","feature:administrative.country|element:geometry.stroke|color:0x555555","feature:administrative|element:geometry.fill|visibility:off"]},on=function(){function n(n){this.staticMapsApi=n}return n.prototype.getImageByLatLong=function(n,t){var l=Object.assign({},an),e=n.toString()+","+t.toString();return l.center=e,l.markers+="|"+e,l.key=S.staticMapsKey,this.staticMapsApi.getImage(l)},n.ctorParameters=function(){return[{type:rn}]},n}(),cn={good:[0,50],moderate:[51,100],unhealthySensitive:[101,150],unhealthy:[151,200],veryUnhealthy:[201,300],hazardous1:[301,400],hazardous2:[401,500]},sn={parameter:"pm25",unit:"\xb5g/m\xb3",hours:24,levels:{good:[0,12],moderate:[12.1,35.4],unhealthySensitive:[35.5,55.4],unhealthy:[55.5,150.4],veryUnhealthy:[150.5,250.4],hazardous1:[250.5,350.4],hazardous2:[350.5,500.4]}},pn={parameter:"pm10",unit:"\xb5g/m\xb3",hours:24,levels:{good:[0,54],moderate:[55,154],unhealthySensitive:[155,254],unhealthy:[255,354],veryUnhealthy:[355,424],hazardous1:[425,504],hazardous2:[505,604]}},_n={parameter:"o3",unit:"ppm",hours:8,levels:{good:[0,.054],moderate:[.055,.07],unhealthySensitive:[.071,.085],unhealthy:[.086,.105],veryUnhealthy:[.106,.2],hazardous1:[null,null],hazardous2:[null,null]}},fn={parameter:"co",unit:"ppm",hours:8,levels:{good:[0,4.4],moderate:[4.5,9.4],unhealthySensitive:[9.5,12.4],unhealthy:[12.5,15.4],veryUnhealthy:[15.5,30.4],hazardous1:[30.5,40.4],hazardous2:[40.5,50.4]}},dn={parameter:"so2",unit:"ppb",hours:1,levels:{good:[0,35],moderate:[36,75],unhealthySensitive:[76,185],unhealthy:[186,304],veryUnhealthy:[305,604],hazardous1:[605,804],hazardous2:[805,1004]}},hn={parameter:"no2",unit:"ppb",hours:1,levels:{good:[0,53],moderate:[54,100],unhealthySensitive:[101,360],unhealthy:[361,649],veryUnhealthy:[650,1249],hazardous1:[1250,1649],hazardous2:[1650,2049]}},yn=function(){function n(){}return n.prototype.calculateAQIByParameter=function(n,t){var l;switch(t){case"pm25":l=this.calculatePM25AQI(n);break;case"pm10":l=this.calculatePM10AQI(n);break;case"o3":l=this.calculateO3AQI(n);break;case"co":l=this.calculateCOAQI(n);break;case"so2":l=this.calculateSO2AQI(n);break;case"no2":l=this.calculateNO2AQI(n);break;default:throw new Error("invalid parameter given for AQI calculation")}return l},n.prototype.calculatePM25AQI=function(n){return this.calculateParameterAQI(n,sn,1)},n.prototype.calculatePM10AQI=function(n){return this.calculateParameterAQI(n,pn,0)},n.prototype.calculateO3AQI=function(n){return this.calculateParameterAQI(n,_n,3)},n.prototype.calculateCOAQI=function(n){return this.calculateParameterAQI(n,fn,1)},n.prototype.calculateSO2AQI=function(n){return this.calculateParameterAQI(n,dn,0)},n.prototype.calculateNO2AQI=function(n){return this.calculateParameterAQI(n,hn,0)},n.prototype.calculateParameterAQI=function(n,t,l){var e,u=this,r=this.truncateAtDecimal(n,l);return Object.keys(t.levels).some(function(n){var l=t.levels[n][0],i=t.levels[n][1],a=cn[n][0],o=cn[n][1];if(l<=r&&r<=i)return e=u.linearCalculation(r,l,i,a,o),!0})?Math.round(e):this.handleUnmatchedLevel(r,t,l)},n.prototype.truncateAtDecimal=function(n,t){return+(Math.floor(n*Math.pow(10,t))/Math.pow(10,t)).toFixed(t)},n.prototype.linearCalculation=function(n,t,l,e,u){return(n-t)*(u-e)/(l-t)+e},n.prototype.handleUnmatchedLevel=function(n,t,l){if(n>=t.levels.hazardous2[1])return cn.hazardous2[1];if(n<=0)return cn.good[0];throw new Error("Failed to calculate AQI for "+t.parameter+" parameter,with value of "+n+" "+t.unit)},n.ctorParameters=function(){return[]},n}(),mn=function(){function n(){}return n.prototype.getAQIClassName=function(n){return n<cn.good[1]?"green":n<cn.moderate[1]?"yellow":n<cn.unhealthySensitive[1]?"orange":n<cn.unhealthy[1]?"red":n<cn.veryUnhealthy[1]?"purple":n<=cn.hazardous2[1]?"maroon":"unknown"},n.ctorParameters=function(){return[]},n}(),gn=function(){function n(n,t,l){this.calculationService=n,this.calculationNamingService=t,this.staticMapsHandlerService=l}return n.prototype.getAQIByParameter=function(n,t){var l=this,e=[];t.forEach(function(t){var l=t.measurements.find(function(t){return t.parameter===n});l&&e.push(l)});var u=e.map(function(t){return l.calculationService.calculateAQIByParameter(t.value,n)});return u.reduce(function(n,t){return n+t},0)/u.length},n.prototype.getStaticMapsImageFileURL=function(n){var t=this,l=this.getLatLong(n);return this.staticMapsHandlerService.getImageByLatLong(l.latitude,l.longitude).toPromise().then(function(n){return t.createImageFromBlob(n)})},n.prototype.getOverallAQI=function(n){var t=n.map(function(n){return n.value});return!n||n.length<=0?0:t.reduce(function(n,t){return Math.max(n,t)})},n.prototype.getOverallAQIClass=function(n){var t=this.getOverallAQI(n);return this.calculationNamingService.getAQIClassName(t)},n.prototype.createImageFromBlob=function(n){var t=new FileReader;return n?(t.readAsDataURL(n),new Promise(function(n){t.onloadend=function(){return n(t.result)}})):Promise.resolve(null)},n.prototype.getLatLong=function(n){var t=this,l={latitude:0,longitude:0};return n.locationsResponse.some(function(n){if(console.log(n),t.hasLatLong(n.coordinates))return l.latitude=n.coordinates.latitude,l.longitude=n.coordinates.longitude,!0}),l},n.prototype.hasLatLong=function(n){return!(!n.latitude||!n.longitude)},n.ctorParameters=function(){return[{type:yn},{type:mn},{type:on}]},n}(),vn=(l("ivSB"),function(){function n(n,t,l){this.latestHandlerService=n,this.staticMapsHandlerService=t,this.cityService=l,this.aqis=[],this.staticMapsURL=""}return n.prototype.ngOnInit=function(){var n=this;console.log("searchedCity:",this.searchedCity),this.getLatestCityMeasurements().subscribe(function(t){n.getAvailableParameters().forEach(function(t){return n.aqis.push({parameter:t,value:n.cityService.getAQIByParameter(t,n.latestResponse)})})}),this.cityService.getStaticMapsImageFileURL(this.searchedCity).then(function(t){return n.staticMapsURL=t})},n.prototype.overallAQI=function(){return this.cityService.getOverallAQI(this.aqis)},n.prototype.overallAQIClass=function(){return this.cityService.getOverallAQIClass(this.aqis)},n.prototype.getLatestCityMeasurements=function(){var n=this;return this.getLatest().map(function(t){return n.latestResponse=t})},n.prototype.getAvailableParameters=function(){var n=[];return this.searchedCity.locationsResponse.forEach(function(t){t.parameters.forEach(function(t){-1===n.findIndex(function(n){return n===t})&&n.push(t)})}),n},n.prototype.getLatest=function(){var n=this.searchedCity.city,t=this.searchedCity.country;return this.latestHandlerService.getLatestByCityAndCountry(n,t)},n.ctorParameters=function(){return[{type:un},{type:on},{type:gn}]},n}()),Cn=[],bn=b._10({encapsulation:2,styles:Cn,data:{}}),Sn=(b._8("aq-city-card",vn,p,{searchedCity:"searchedCity"},{},[]),function(){function n(){this.animationStarted=!1}return n.prototype.ngOnInit=function(){},n.ctorParameters=function(){return[]},n}()),An=[],In=b._10({encapsulation:2,styles:An,data:{animation:[{type:7,name:"fadeSlide",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateY(-100%)",opacity:0},offset:null},{type:4,styles:{type:6,styles:{transform:"translateY(0)",opacity:1},offset:null},timings:"300ms"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{transform:"translateY(0)",opacity:1},offset:null},{type:4,styles:{type:6,styles:{transform:"translateY(-100%)",opacity:0},offset:null},timings:"300ms"}],options:null}],options:{}}]}}),Qn=(b._8("aq-city-cards-list",Sn,d,{searchedCities:"searchedCities"},{},[]),[]),Pn=b._10({encapsulation:2,styles:Qn,data:{}}),wn=(b._8("aq-compare",U,y,{},{},[]),function(){function n(){}return n.ctorParameters=function(){return[]},n}()),On=[],kn=b._10({encapsulation:2,styles:On,data:{}}),Ln=(b._8("aq-home",wn,g,{},{},[]),[]),qn=b._10({encapsulation:2,styles:Ln,data:{}}),Fn=b._8("aq-app",I,C,{},{},[]),xn=l("f9zQ"),zn=l("fL27"),Mn=l("EyWH"),Un=l("8Xfy"),jn=l("4jwp"),Bn=l("vgc3"),Rn=function(){function n(){}return n}(),Dn=function(){function n(){}return n}(),En=function(){function n(){}return n}(),Nn=function(){function n(){}return n}(),Hn=l("ghl+"),Kn=l("CZgk"),Vn=function(){function n(){}return n}(),Tn=function(){function n(){}return n}(),Wn=function(){function n(){}return n}(),Yn=function(){function n(){}return n}(),$n=function(){function n(){}return n}(),Gn=function(){function n(){}return n}(),Jn=b._9(A,[I],function(n){return b._23([b._24(512,b.k,b._5,[[8,[Fn]],[3,b.k],b.B]),b._24(5120,b.z,b._22,[[3,b.z]]),b._24(4608,D.h,D.g,[b.z]),b._24(4608,b.i,b.i,[]),b._24(5120,b.a,b._14,[]),b._24(5120,b.x,b._19,[]),b._24(5120,b.y,b._20,[]),b._24(4608,X.c,X.t,[D.c]),b._24(6144,b.N,null,[X.c]),b._24(4608,X.f,X.g,[]),b._24(5120,X.d,function(n,t,l,e){return[new X.l(n),new X.p(t),new X.o(l,e)]},[D.c,D.c,D.c,X.f]),b._24(4608,X.e,X.e,[X.d,b.D]),b._24(135680,X.n,X.n,[D.c]),b._24(4608,X.m,X.m,[X.e,X.n]),b._24(5120,xn.a,zn.d,[]),b._24(5120,xn.c,zn.e,[]),b._24(4608,xn.b,zn.c,[xn.a,xn.c]),b._24(5120,b.L,zn.f,[X.m,xn.b,b.D]),b._24(6144,X.q,null,[X.n]),b._24(4608,b.S,b.S,[b.D]),b._24(4608,X.h,X.h,[D.c]),b._24(4608,X.j,X.j,[D.c]),b._24(4608,F.c,F.c,[]),b._24(4608,F.h,F.b,[]),b._24(5120,F.j,F.k,[]),b._24(4608,F.i,F.i,[F.c,F.h,F.j]),b._24(4608,F.f,F.a,[]),b._24(5120,F.d,F.l,[F.i,F.f]),b._24(4608,N.d,N.d,[]),b._24(4608,N.o,N.o,[]),b._24(4608,x,x,[]),b._24(4608,z,z,[F.d,x]),b._24(4608,en,en,[F.d,x]),b._24(4608,T,T,[F.d,x]),b._24(4608,rn,rn,[F.d,x]),b._24(4608,yn,yn,[]),b._24(4608,mn,mn,[]),b._24(4608,M,M,[z]),b._24(4608,un,un,[en]),b._24(4608,W,W,[T]),b._24(4608,on,on,[rn]),b._24(4608,Mn.b,zn.b,[b.L,X.b]),b._24(6144,J.b,null,[X.b]),b._24(4608,J.c,J.c,[[2,J.b]]),b._24(4608,R.a,R.a,[]),b._24(4608,Un.h,Un.h,[R.a]),b._24(4608,Un.g,Un.g,[Un.h,R.a,b.D]),b._24(136192,Un.d,Un.b,[[3,Un.d],R.a]),b._24(5120,Un.k,Un.j,[[3,Un.k],[2,Un.i],R.a]),b._24(5120,Un.f,Un.e,[[3,Un.f],b.D,R.a]),b._24(5120,jn.c,jn.a,[[3,jn.c],b.D,R.a]),b._24(5120,jn.f,jn.e,[[3,jn.f],R.a,b.D,jn.c]),b._24(4608,G.e,G.e,[jn.c,jn.f]),b._24(5120,G.c,G.f,[[3,G.c]]),b._24(4608,G.i,G.i,[jn.f]),b._24(4608,G.a,G.a,[G.e,G.c,b.k,G.i,b.e,b.v,b.D]),b._24(5120,G.g,G.h,[G.a]),b._24(5120,$.a,$.b,[G.a]),b._24(4608,P.c,P.c,[]),b._24(5120,Bn.c,Bn.a,[[3,Bn.c],[2,F.d],X.c]),b._24(4608,V,V,[]),b._24(4608,gn,gn,[yn,mn,on]),b._24(4608,q,q,[]),b._24(512,D.b,D.b,[]),b._24(1024,b.p,X.r,[]),b._24(1024,b.b,function(n,t){return[X.s(n,t)]},[[2,X.i],[2,b.C]]),b._24(512,b.c,b.c,[[2,b.b]]),b._24(131584,b._12,b._12,[b.D,b._6,b.v,b.p,b.k,b.c]),b._24(2048,b.e,null,[b._12]),b._24(512,b.d,b.d,[b.e]),b._24(512,X.a,X.a,[[3,X.a]]),b._24(512,F.e,F.e,[]),b._24(512,N.m,N.m,[]),b._24(512,N.l,N.l,[]),b._24(512,Rn,Rn,[]),b._24(512,Dn,Dn,[]),b._24(512,En,En,[]),b._24(512,Nn,Nn,[]),b._24(512,zn.a,zn.a,[]),b._24(512,P.a,P.a,[]),b._24(512,J.a,J.a,[]),b._24(256,P.d,!0,[]),b._24(512,P.j,P.j,[[2,P.d]]),b._24(512,w.c,w.c,[]),b._24(512,R.b,R.b,[]),b._24(512,P.t,P.t,[]),b._24(512,Un.a,Un.a,[]),b._24(512,Hn.a,Hn.a,[]),b._24(512,P.r,P.r,[]),b._24(512,P.o,P.o,[]),b._24(512,Kn.b,Kn.b,[]),b._24(512,jn.b,jn.b,[]),b._24(512,G.d,G.d,[]),b._24(512,$.d,$.d,[]),b._24(512,K.c,K.c,[]),b._24(512,Z.b,Z.b,[]),b._24(512,Bn.b,Bn.b,[]),b._24(512,B.b,B.b,[]),b._24(512,Vn,Vn,[]),b._24(512,Tn,Tn,[]),b._24(512,Wn,Wn,[]),b._24(512,Yn,Yn,[]),b._24(512,$n,$n,[]),b._24(512,Gn,Gn,[]),b._24(512,A,A,[])])});S.production&&Object(b.Z)(),Object(X.k)().bootstrapModuleFactory(Jn).catch(function(n){return console.log(n)})},gFIY:function(n,t){function l(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}l.keys=function(){return[]},l.resolve=l,n.exports=l,l.id="gFIY"}},[0]);