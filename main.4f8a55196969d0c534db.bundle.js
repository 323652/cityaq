webpackJsonp([1],{0:function(l,n,t){l.exports=t("cDNt")},cDNt:function(l,n,t){"use strict";function u(l){return s._33(0,[(l()(),s._13(0,0,null,null,6,"mat-option",[["class","mat-option"],["role","option"]],[[1,"tabindex",0],[2,"mat-selected",null],[2,"mat-option-multiple",null],[2,"mat-active",null],[8,"id",0],[1,"aria-selected",0],[1,"aria-disabled",0],[2,"mat-option-disabled",null]],[[null,"click"],[null,"keydown"]],function(l,n,t){var u=!0;if("click"===n){u=!1!==s._26(l,2)._selectViaInteraction()&&u}if("keydown"===n){u=!1!==s._26(l,2)._handleKeydown(t)&&u}return u},y.b,y.a)),s._11(1,16384,null,0,m.p,[],null,null),s._11(2,49152,[[7,4]],0,m.n,[s.o,s.h,[2,m.m]],{value:[0,"value"]},null),(l()(),s._31(-1,0,["\n                    "])),(l()(),s._13(4,0,null,0,1,"span",[],null,null,null,null,null)),(l()(),s._31(5,null,["",""])),(l()(),s._31(-1,0,["\n                "]))],function(l,n){l(n,2,0,n.context.$implicit.city)},function(l,n){l(n,0,0,s._26(n,2)._getTabIndex(),s._26(n,2).selected,s._26(n,2).multiple,s._26(n,2).active,s._26(n,2).id,s._26(n,2).selected.toString(),s._26(n,2).disabled.toString(),s._26(n,2).disabled),l(n,5,0,n.context.$implicit.city)})}function e(l){return s._33(0,[(l()(),s._13(0,0,null,null,10,"mat-card",[["class","city-card mat-card"]],null,null,null,h.b,h.a)),s._11(1,16384,null,0,m.p,[],null,null),s._11(2,49152,null,0,g.a,[],null,null),s._11(3,278528,null,0,v.d,[s.x,s.y,s.o,s.J],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),s._31(-1,0,["\n        "])),(l()(),s._13(5,0,null,0,1,"h1",[],null,null,null,null,null)),(l()(),s._31(6,null,["",""])),(l()(),s._31(-1,0,["\n        "])),(l()(),s._13(8,0,null,0,1,"h2",[],null,null,null,null,null)),(l()(),s._31(9,null,["\n            ",": ","\n        "])),(l()(),s._31(-1,0,["\n    "]))],function(l,n){l(n,3,0,"city-card",n.component.getClass(n.context.$implicit))},function(l,n){l(n,6,0,n.context.$implicit.city),l(n,9,0,n.context.$implicit.measurements[0].parameter,n.context.$implicit.measurements[0].value)})}function i(l){return s._33(0,[(l()(),s._13(0,0,null,null,44,"div",[],null,null,null,null,null)),(l()(),s._31(-1,null,["\n    "])),(l()(),s._13(2,0,null,null,38,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(l,n,t){var u=!0;if("submit"===n){u=!1!==s._26(l,4).onSubmit(t)&&u}if("reset"===n){u=!1!==s._26(l,4).onReset()&&u}return u},null,null)),s._11(3,16384,null,0,b.p,[],null,null),s._11(4,16384,null,0,b.m,[[8,null],[8,null]],null,null),s._28(2048,null,b.b,null,[b.m]),s._11(6,16384,null,0,b.l,[b.b],null,null),(l()(),s._31(-1,null,["\n        "])),(l()(),s._13(8,0,null,null,31,"mat-form-field",[["class","cities-input mat-input-container mat-form-field"]],[[2,"mat-input-invalid",null],[2,"mat-form-field-invalid",null],[2,"mat-form-field-can-float",null],[2,"mat-form-field-should-float",null],[2,"mat-focused",null],[2,"mat-primary",null],[2,"mat-accent",null],[2,"mat-warn",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],null,null,C.b,C.a)),s._11(9,16384,null,0,m.p,[],null,null),s._11(10,7389184,null,6,w.a,[s.o,s.K,s.h,[2,m.h]],null,null),s._29(335544320,1,{_control:0}),s._29(335544320,2,{_placeholderChild:0}),s._29(603979776,3,{_errorChildren:1}),s._29(603979776,4,{_hintChildren:1}),s._29(603979776,5,{_prefixChildren:1}),s._29(603979776,6,{_suffixChildren:1}),(l()(),s._31(-1,1,["\n            "])),(l()(),s._13(18,16777216,null,1,9,"input",[["aria-autocomplete","list"],["aria-label","City"],["autocomplete","off"],["class","mat-input-element mat-form-field-autofill-control"],["matInput",""],["placeholder","City"],["role","combobox"]],[[1,"aria-activedescendant",0],[1,"aria-expanded",0],[1,"aria-owns",0],[1,"id",0],[8,"placeholder",0],[8,"disabled",0],[8,"required",0],[8,"readOnly",0],[1,"aria-describedby",0],[1,"aria-invalid",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup.enter"],[null,"focusin"],[null,"blur"],[null,"input"],[null,"keydown"],[null,"compositionstart"],[null,"compositionend"],[null,"focus"]],function(l,n,t){var u=!0,e=l.component;if("focusin"===n){u=!1!==s._26(l,20)._handleFocus()&&u}if("blur"===n){u=!1!==s._26(l,20)._onTouched()&&u}if("input"===n){u=!1!==s._26(l,20)._handleInput(t)&&u}if("keydown"===n){u=!1!==s._26(l,20)._handleKeydown(t)&&u}if("input"===n){u=!1!==s._26(l,21)._handleInput(t.target.value)&&u}if("blur"===n){u=!1!==s._26(l,21).onTouched()&&u}if("compositionstart"===n){u=!1!==s._26(l,21)._compositionStart()&&u}if("compositionend"===n){u=!1!==s._26(l,21)._compositionEnd(t.target.value)&&u}if("blur"===n){u=!1!==s._26(l,25)._focusChanged(!1)&&u}if("focus"===n){u=!1!==s._26(l,25)._focusChanged(!0)&&u}if("input"===n){u=!1!==s._26(l,25)._onInput()&&u}if("keyup.enter"===n){u=!1!==e.addToSearchedCities(t)&&u}return u},null,null)),s._11(19,16384,null,0,m.p,[],null,null),s._11(20,147456,null,0,I.e,[s.o,q.a,s.V,s.D,s.h,I.a,[2,A.c],[2,w.a],[2,R.b]],{autocomplete:[0,"autocomplete"]},null),s._11(21,16384,null,0,b.c,[s.K,s.o,[2,b.a]],null,null),s._28(1024,null,b.i,function(l,n){return[l,n]},[I.e,b.c]),s._11(23,540672,null,0,b.f,[[8,null],[8,null],[2,b.i]],{form:[0,"form"]},null),s._28(2048,null,b.j,null,[b.f]),s._11(25,933888,null,0,V.a,[s.o,s.K,T.a,[2,b.j],[2,b.m],[2,b.g],m.c],{placeholder:[0,"placeholder"]},null),s._11(26,16384,null,0,b.k,[b.j],null,null),s._28(2048,[[1,4]],w.b,null,[V.a]),(l()(),s._31(-1,1,["\n            "])),(l()(),s._13(29,0,null,1,9,"mat-autocomplete",[["class","mat-autocomplete"]],null,null,null,U.b,U.a)),s._11(30,16384,null,0,m.p,[],null,null),s._11(31,1097728,[["auto",4]],2,I.c,[s.h,s.o],null,null),s._29(603979776,7,{options:1}),s._29(603979776,8,{optionGroups:1}),(l()(),s._31(-1,0,["\n                "])),(l()(),s._7(16777216,null,0,2,null,u)),s._11(36,802816,null,0,v.e,[s.V,s.R,s.x],{ngForOf:[0,"ngForOf"]},null),s._27(131072,v.a,[s.h]),(l()(),s._31(-1,0,["\n            "])),(l()(),s._31(-1,1,["\n        "])),(l()(),s._31(-1,null,["\n    "])),(l()(),s._31(-1,null,["\n    "])),(l()(),s._7(16777216,null,null,1,null,e)),s._11(43,802816,null,0,v.e,[s.V,s.R,s.x],{ngForOf:[0,"ngForOf"]},null),(l()(),s._31(-1,null,["\n"]))],function(l,n){var t=n.component;l(n,20,0,s._26(n,31)),l(n,23,0,t.cityCtrl);l(n,25,0,"City"),l(n,36,0,s._32(n,36,0,s._26(n,37).transform(t.filteredCities))),l(n,43,0,t.searchedLocations)},function(l,n){l(n,2,0,s._26(n,6).ngClassUntouched,s._26(n,6).ngClassTouched,s._26(n,6).ngClassPristine,s._26(n,6).ngClassDirty,s._26(n,6).ngClassValid,s._26(n,6).ngClassInvalid,s._26(n,6).ngClassPending),l(n,8,1,[s._26(n,10)._control.errorState,s._26(n,10)._control.errorState,s._26(n,10)._canPlaceholderFloat,s._26(n,10)._control.shouldPlaceholderFloat||s._26(n,10)._shouldAlwaysFloat,s._26(n,10)._control.focused,"primary"==s._26(n,10).color,"accent"==s._26(n,10).color,"warn"==s._26(n,10).color,s._26(n,10)._shouldForward("untouched"),s._26(n,10)._shouldForward("touched"),s._26(n,10)._shouldForward("pristine"),s._26(n,10)._shouldForward("dirty"),s._26(n,10)._shouldForward("valid"),s._26(n,10)._shouldForward("invalid"),s._26(n,10)._shouldForward("pending")]),l(n,18,1,[null==s._26(n,20).activeOption?null:s._26(n,20).activeOption.id,s._26(n,20).panelOpen.toString(),null==s._26(n,20).autocomplete?null:s._26(n,20).autocomplete.id,s._26(n,25).id,s._26(n,25).placeholder,s._26(n,25).disabled,s._26(n,25).required,s._26(n,25).readonly,s._26(n,25)._ariaDescribedby||null,s._26(n,25).errorState,s._26(n,26).ngClassUntouched,s._26(n,26).ngClassTouched,s._26(n,26).ngClassPristine,s._26(n,26).ngClassDirty,s._26(n,26).ngClassValid,s._26(n,26).ngClassInvalid,s._26(n,26).ngClassPending])})}function o(l){return s._33(0,[(l()(),s._13(0,0,null,null,1,"viz-search-display",[],null,null,null,i,B)),s._11(1,114688,null,0,z,[k,x,O],null,null)],function(l,n){l(n,1,0)},null)}function r(l){return s._33(0,[(l()(),s._13(0,0,null,null,28,"div",[["class","wrapper"]],null,null,null,null,null)),(l()(),s._31(-1,null,["\n    "])),(l()(),s._13(2,0,null,null,9,"mat-card",[["class","intro mat-card"]],null,null,null,h.b,h.a)),s._11(3,16384,null,0,m.p,[],null,null),s._11(4,49152,null,0,g.a,[],null,null),(l()(),s._31(-1,0,["\n        "])),(l()(),s._13(6,0,null,0,1,"h1",[],null,null,null,null,null)),(l()(),s._31(-1,null,["Welcome to OpenAQ Viz"])),(l()(),s._31(-1,0,["\n        "])),(l()(),s._13(9,0,null,0,1,"h3",[],null,null,null,null,null)),(l()(),s._31(-1,null,["Compare air quality for cities by searching below"])),(l()(),s._31(-1,0,["\n    "])),(l()(),s._31(-1,null,["\n\n    "])),(l()(),s._13(13,0,null,null,1,"viz-search-display",[],null,null,null,i,B)),s._11(14,114688,null,0,z,[k,x,O],null,null),(l()(),s._31(-1,null,["\n    \n    "])),(l()(),s._13(16,0,null,null,11,"footer",[],null,null,null,null,null)),(l()(),s._31(-1,null,["\n        "])),(l()(),s._13(18,0,null,null,8,"mat-card",[["class","mat-card"]],null,null,null,h.b,h.a)),s._11(19,16384,null,0,m.p,[],null,null),s._11(20,49152,null,0,g.a,[],null,null),(l()(),s._31(-1,0,["\n            "])),(l()(),s._13(22,0,null,0,3,"h3",[],null,null,null,null,null)),(l()(),s._31(-1,null,["Find out more about open-source air data @ "])),(l()(),s._13(24,0,null,null,1,"a",[["href","https://openaq.org"],["target","_blank"]],null,null,null,null,null)),(l()(),s._31(-1,null,["openaq.org"])),(l()(),s._31(-1,0,["\n        "])),(l()(),s._31(-1,null,["\n    "])),(l()(),s._31(-1,null,["\n"]))],function(l,n){l(n,14,0)},null)}function a(l){return s._33(0,[(l()(),s._13(0,0,null,null,1,"viz-home",[],null,null,null,r,M)),s._11(1,49152,null,0,E,[],null,null)],null,null)}function _(l){return s._33(0,[(l()(),s._13(0,0,null,null,1,"viz-home",[],null,null,null,r,M)),s._11(1,49152,null,0,E,[],null,null)],null,null)}function c(l){return s._33(0,[(l()(),s._13(0,0,null,null,1,"viz-app",[],null,null,null,_,N)),s._11(1,49152,null,0,f,[],null,null)],null,null)}Object.defineProperty(n,"__esModule",{value:!0});var s=t("/oeL"),d={production:!0,openaqApiUrl:"https://api.openaq.org/v1/"},p=function(){function l(){}return l}(),f=function(){function l(){}return l}(),h=t("z4MQ"),m=t("j5BN"),g=t("Ioj9"),y=t("8oXs"),v=t("qbdv"),b=t("bm2B"),C=t("6OSA"),w=t("Lpd/"),k=function(){function l(){}return l.prototype.filterCities=function(l,n){return n.filter(function(n){return 0===n.city.toLowerCase().indexOf(l.toLowerCase())}).slice(0,5)},l.prototype.sortCities=function(l,n){var t=l.city.toLowerCase(),u=n.city.toLowerCase();return t<u?-1:t>u?1:0},l.prototype.pm25Color=function(l){if(!this.validateLatestResponse(l))return"";var n=l.measurements[0].value;return n?n<20?"green":n<40?"orange":n<70?"red":n>=70?"dark-red":"":""},l.prototype.validateLatestResponse=function(l){return!!(l&&l.city&&l.measurements&&l.measurements[0]&&l.measurements[0].value)},l}(),S=t("CPp0"),D=function(l){var n=[];for(var t in l)n.push(encodeURIComponent(t)+"="+encodeURIComponent(l[t]));return n.join("&")},L=(t("GQSG"),function(){function l(l){this.http=l}return l.prototype.getCities=function(l){return this.http.get(d.openaqApiUrl+"cities?"+D(l)).map(function(l){return l.json().results})},l.ctorParameters=function(){return[{type:S.d}]},l}()),F=function(){function l(){}return l}(),x=function(){function l(l){this.citiesApi=l}return l.prototype.getAllCities=function(){var l=new F;return l.limit=9999,this.citiesApi.getCities(l)},l.ctorParameters=function(){return[{type:L}]},l}(),j=function(){function l(l){this.http=l}return l.prototype.getLatest=function(l){return this.http.get(d.openaqApiUrl+"latest?"+D(l)).map(function(l){return l.json().results})},l.ctorParameters=function(){return[{type:S.d}]},l}(),P=function(){function l(){}return l}(),O=function(){function l(l){this.latestApi=l}return l.prototype.getLatestPM25ByCity=function(l){var n=new P;return n.city=l,n.parameter="pm25",this.latestApi.getLatest(n)},l.ctorParameters=function(){return[{type:j}]},l}(),z=(t("RXa1"),function(){function l(l,n,t){this.searchDisplayService=l,this.citiesService=n,this.latestService=t,this.allCities=[],this.searchedLocations=[]}return l.prototype.ngOnInit=function(){var l=this;this.cityCtrl=new b.e,this.loadCities(),this.filteredCities=this.cityCtrl.valueChanges.startWith(null).map(function(n){return n?l.searchDisplayService.filterCities(n,l.allCities):l.allCities.slice(0,5)})},l.prototype.loadCities=function(){var l=this;this.citiesService.getAllCities().subscribe(function(n){return l.allCities=n.sort(l.searchDisplayService.sortCities)})},l.prototype.loadLatest=function(l){var n=this;this.latestService.getLatestPM25ByCity(l).subscribe(function(l){n.searchDisplayService.validateLatestResponse(l[0])&&n.searchedLocations.push(l[0])})},l.prototype.addToSearchedCities=function(l){this.loadLatest(this.cityCtrl.value)},l.prototype.getClass=function(l){return this.searchDisplayService.pm25Color(l)},l.ctorParameters=function(){return[{type:k},{type:x},{type:O}]},l}()),I=t("1ini"),q=t("OFGE"),A=t("l6RC"),R=t("fc+i"),V=t("SlD5"),T=t("V8+5"),U=t("Elun"),$=[],B=s._10({encapsulation:2,styles:$,data:{}}),E=(s._8("viz-search-display",z,o,{},{},[]),function(){function l(){}return l.ctorParameters=function(){return[]},l}()),K=[],M=s._10({encapsulation:2,styles:K,data:{}}),G=(s._8("viz-home",E,a,{},{},[]),[]),N=s._10({encapsulation:2,styles:G,data:{}}),Q=s._8("viz-app",f,c,{},{},[]),W=t("f9zQ"),X=t("fL27"),J=t("8Xfy"),Y=t("4jwp"),Z=t("EyWH"),H=function(){function l(){}return l}(),ll=function(){function l(){}return l}(),nl=function(){function l(){}return l}(),tl=t("ghl+"),ul=t("CZgk"),el=function(){function l(){}return l}(),il=function(){function l(){}return l}(),ol=function(){function l(){}return l}(),rl=function(){function l(){}return l}(),al=s._9(p,[f],function(l){return s._23([s._24(512,s.k,s._5,[[8,[Q]],[3,s.k],s.B]),s._24(5120,s.z,s._22,[[3,s.z]]),s._24(4608,v.h,v.g,[s.z]),s._24(4608,s.i,s.i,[]),s._24(5120,s.a,s._14,[]),s._24(5120,s.x,s._19,[]),s._24(5120,s.y,s._20,[]),s._24(4608,R.c,R.t,[v.c]),s._24(6144,s.N,null,[R.c]),s._24(4608,R.f,R.g,[]),s._24(5120,R.d,function(l,n,t,u){return[new R.l(l),new R.p(n),new R.o(t,u)]},[v.c,v.c,v.c,R.f]),s._24(4608,R.e,R.e,[R.d,s.D]),s._24(135680,R.n,R.n,[v.c]),s._24(4608,R.m,R.m,[R.e,R.n]),s._24(5120,W.a,X.d,[]),s._24(5120,W.c,X.e,[]),s._24(4608,W.b,X.c,[W.a,W.c]),s._24(5120,s.L,X.f,[R.m,W.b,s.D]),s._24(6144,R.q,null,[R.n]),s._24(4608,s.S,s.S,[s.D]),s._24(4608,R.h,R.h,[v.c]),s._24(4608,R.j,R.j,[v.c]),s._24(4608,S.c,S.c,[]),s._24(4608,S.g,S.b,[]),s._24(5120,S.i,S.j,[]),s._24(4608,S.h,S.h,[S.c,S.g,S.i]),s._24(4608,S.f,S.a,[]),s._24(5120,S.d,S.k,[S.h,S.f]),s._24(4608,L,L,[S.d]),s._24(4608,j,j,[S.d]),s._24(4608,x,x,[L]),s._24(4608,O,O,[j]),s._24(6144,A.b,null,[R.b]),s._24(4608,A.c,A.c,[[2,A.b]]),s._24(4608,T.a,T.a,[]),s._24(4608,J.h,J.h,[T.a]),s._24(4608,J.g,J.g,[J.h,T.a,s.D]),s._24(136192,J.d,J.b,[[3,J.d],T.a]),s._24(5120,J.k,J.j,[[3,J.k],[2,J.i],T.a]),s._24(5120,J.f,J.e,[[3,J.f],s.D,T.a]),s._24(5120,Y.c,Y.a,[[3,Y.c],s.D,T.a]),s._24(5120,Y.f,Y.e,[[3,Y.f],T.a,s.D,Y.c]),s._24(4608,q.e,q.e,[Y.c,Y.f]),s._24(5120,q.c,q.f,[[3,q.c]]),s._24(4608,q.i,q.i,[Y.f]),s._24(4608,q.a,q.a,[q.e,q.c,s.k,q.i,s.e,s.v,s.D]),s._24(5120,q.g,q.h,[q.a]),s._24(5120,I.a,I.b,[q.a]),s._24(4608,m.c,m.c,[]),s._24(4608,Z.b,X.b,[s.L,R.b]),s._24(4608,b.q,b.q,[]),s._24(4608,b.d,b.d,[]),s._24(4608,k,k,[]),s._24(512,v.b,v.b,[]),s._24(1024,s.p,R.r,[]),s._24(1024,s.b,function(l,n){return[R.s(l,n)]},[[2,R.i],[2,s.C]]),s._24(512,s.c,s.c,[[2,s.b]]),s._24(131584,s._12,s._12,[s.D,s._6,s.v,s.p,s.k,s.c]),s._24(2048,s.e,null,[s._12]),s._24(512,s.d,s.d,[s.e]),s._24(512,R.a,R.a,[[3,R.a]]),s._24(512,S.e,S.e,[]),s._24(512,H,H,[]),s._24(512,ll,ll,[]),s._24(512,nl,nl,[]),s._24(512,m.a,m.a,[]),s._24(512,A.a,A.a,[]),s._24(256,m.d,!0,[]),s._24(512,m.j,m.j,[[2,m.d]]),s._24(512,g.c,g.c,[]),s._24(512,T.b,T.b,[]),s._24(512,m.t,m.t,[]),s._24(512,J.a,J.a,[]),s._24(512,tl.a,tl.a,[]),s._24(512,m.r,m.r,[]),s._24(512,m.o,m.o,[]),s._24(512,ul.b,ul.b,[]),s._24(512,Y.b,Y.b,[]),s._24(512,q.d,q.d,[]),s._24(512,I.d,I.d,[]),s._24(512,w.c,w.c,[]),s._24(512,V.b,V.b,[]),s._24(512,el,el,[]),s._24(512,X.a,X.a,[]),s._24(512,il,il,[]),s._24(512,b.o,b.o,[]),s._24(512,b.h,b.h,[]),s._24(512,b.n,b.n,[]),s._24(512,ol,ol,[]),s._24(512,rl,rl,[]),s._24(512,p,p,[])])});d.production&&Object(s.Z)(),Object(R.k)().bootstrapModuleFactory(al).catch(function(l){return console.log(l)})},gFIY:function(l,n){function t(l){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+l+"'.")})}t.keys=function(){return[]},t.resolve=t,l.exports=t,t.id="gFIY"}},[0]);